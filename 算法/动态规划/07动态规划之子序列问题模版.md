# åŠ¨æ€è§„åˆ’ä¹‹å­åºåˆ—é—®é¢˜æ¨¡ç‰ˆ

|                            ç‰›å®¢ç½‘                            |                           LeetCode                           |                             åŠ›æ‰£                             | éš¾åº¦ |
| :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :--: |
| [æœ€é•¿å›æ–‡å­åºåˆ—](https://www.nowcoder.com/practice/c7fc893654b44324b6763dea095ceaaf?tpId=295&fromPut=pc_wzcpa_labuladong_sf) | [516. Longest Palindromic Subsequence](https://leetcode.com/problems/longest-palindromic-subsequence) | [516. æœ€é•¿å›æ–‡å­åºåˆ—](https://leetcode-cn.com/problems/longest-palindromic-subsequence) |  ğŸŸ    |
| [è®©å­—ç¬¦ä¸²æˆä¸ºå›æ–‡ä¸²çš„æœ€å°‘æ’å…¥æ¬¡æ•°](https://www.nowcoder.com/practice/f6b2e405d2364684bcc59b97f43a1c8f?tpId=295&fromPut=pc_wzcpa_labuladong_sf) | [1312. Minimum Insertion Steps to Make a String Palindrome](https://leetcode.com/problems/minimum-insertion-steps-to-make-a-string-palindrome) | [1312. è®©å­—ç¬¦ä¸²æˆä¸ºå›æ–‡ä¸²çš„æœ€å°‘æ’å…¥æ¬¡æ•°](https://leetcode-cn.com/problems/minimum-insertion-steps-to-make-a-string-palindrome) |  ğŸ”´   |

å­åºåˆ—é—®é¢˜ï¼š

* ä¸€èˆ¬æ±‚æœ€é•¿å­åºåˆ—ï¼Œè€ƒå¯Ÿçš„å°±æ˜¯åŠ¨æ€è§„åˆ’ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º`O(N^2)`

ä¸¤ç§æ€è·¯å°±æ˜¯ä¸¤ç§å®šä¹‰`dp`æ•°ç»„çš„æ€è·¯ã€‚

## 1. ä¸¤ç§æ€è·¯

### 1.1 ç¬¬ä¸€ç§æ€è·¯ï¼šä¸€ç»´çš„`dp`æ•°ç»„

```java
int n = array.length;
int[] dp = new int[n];

for(int i=1; i<n; ++i){
  for(int j=0; j<i; ++j){
    dp[i] = æœ€å€¼(dp[i], dp[j]...)
  }
}
```

æ¯”å¦‚æœ€é•¿é€’å¢å­åºåˆ—å’Œæœ€å¤§å­æ•°ç»„å’Œéƒ½æ˜¯è¿™ä¸ªæ€è·¯ã€‚

`dp[i]`å®šä¹‰ï¼š

åœ¨å­æ•°ç»„`arr[0..i]`ä¸­ï¼Œæˆ‘ä»¬è¦æ±‚çš„å­åºåˆ—çš„é•¿åº¦æ˜¯`dp[i]`ã€‚

### 1.2 ç¬¬äºŒç§æ€è·¯ï¼šäºŒç»´çš„`dp`æ•°ç»„

```java
int n = array.length;
int[][] dp = new int[n][n];

for(int i=0; i<n; ++i){
  for(int j=0; j<n; ++j){
    if(arr[i]==arr[j])
    	dp[i][j] = dp[i][j]+...
    else
      dp[i][j] = æœ€å€¼(...)
  }
}
```

è¿™ç§æ€è·¯ç›¸å¯¹æ›´å¤šï¼Œå°¤å…¶è®¾è®¡ä¸¤ä¸ªå­—ç¬¦ä¸²æˆ–è€…æ•°ç»„çš„å­åºåˆ—æ—¶å€™ã€‚æ¯”å¦‚**æœ€é•¿å…¬å…±å­åºåˆ—**å’Œ**ç¼–è¾‘è·ç¦»**ï¼›è¿™ç§æ€è·¯ä¹Ÿè®¾è®¡ä¸€ä¸ªå­—ç¬¦ä¸²å’Œæ•°ç»„æƒ…å†µï¼Œå¦‚**å›æ–‡å­åºåˆ—**é—®é¢˜ã€‚

####  1.2.1 ä¸¤ä¸ªå­—ç¬¦ä¸²æˆ–æ•°ç»„çš„`dp[i][j]`å®šä¹‰

åœ¨å­æ•°ç»„`arr1[0..i]`å’Œå­æ•°ç»„`arr2[0..i]`ä¸­æˆ‘ä»¬è¦æ±‚çš„å­åºåˆ—é•¿åº¦ä¸º`dp[i][j]`ã€‚

#### 1.2.2 åªæœ‰ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ•°ç»„çš„`dp[i][j]`å®šä¹‰

åœ¨å­æ•°ç»„`arr[i..j]`ä¸­æˆ‘ä»¬è¦æ±‚çš„å­åºåˆ—é•¿åº¦ä¸º`dp[i][j]`ã€‚

## 2. æœ€é•¿å›æ–‡å­åºåˆ—

åŠ›æ‰£ç¬¬[516. æœ€é•¿å›æ–‡å­åºåˆ—](https://leetcode-cn.com/problems/longest-palindromic-subsequence)

![image-20220415020846373](img/image-20220415020846373.png)

æ€è·¯ï¼š

`dp`æ•°ç»„çš„å®šä¹‰æ˜¯: 

* **åœ¨å­ä¸²`arr[i..j]`ä¸­æˆ‘ä»¬è¦æ±‚çš„å›æ–‡å­åºåˆ—é•¿åº¦ä¸º`dp[i][j]`**ã€‚

![å›¾ç‰‡](img/640.jpeg)

å¯ä»¥è¿™å–å†³äº`s[i]`å’Œ`s[j]`ã€‚

* å‡å¦‚è¿™ä¸¤è€…ç›¸ç­‰ï¼Œåˆ™`d[i][j]=dp[i+1]dp[j-1]+2`
* ä¸ç›¸ç­‰ï¼Œè¯´æ˜ä¸èƒ½åŒæ—¶å‡ºç°åœ¨`s[i...j]`çš„æœ€é•¿å›æ–‡å­åºåˆ—ä¸­ï¼Œå°†ä»–ä»¬ä¸¤åˆ†åˆ«åŠ å…¥`s[i+1...j-1]`ï¼Œæœ€åå–å¤§è€…å³å¯ï¼Œå¦‚ä¸‹å›¾ã€‚

![å›¾ç‰‡](img/640-20220415021756910.jpeg)

`dpå‡½æ•°`å†™æˆä»£ç 

```java
if(s[i]==s[j])
  // ç›¸ç­‰åˆ™ç›´æ¥åŠ å…¥
  d[i][j]=dp[i+1]dp[j-1]+2 
else
  // åˆ†åˆ«åŠ å…¥ï¼Œå–å¤§å€¼
  d[i][j] = max(dp[i+1]dp[j], dp[i]dp[j-1])
```

æœ€åæˆ‘ä»¬è¦æ±‚çš„ç­”æ¡ˆå°±æ˜¯`dp[0]dp[n-1]`

## 3. ä»£ç å®ç°

![å›¾ç‰‡](img/640-20220415024831655.jpeg)

éå†æ–¹å¼æœ‰ä¸¤ç§ï¼Œé€‰æ‹©åç€éå†ã€‚

```java
class Solution {
    public int longestPalindromeSubseq(String s) {
        int n = s.length();
        if(n==1) return 1;
        
        int[][] dp = new int[n][n]; //dp[i][j] is the longest Palindrome Subseq of s[i..j]
        
        // init dp table base case
        for(int i=0; i<n; ++i){
            dp[i][i] = 1;
        }

        for(int i=n-1; i>=0; --i){
            for(int j=i+1; j<n; ++j){
                //çŠ¶æ€è½¬ç§»æ–¹ç¨‹
                if(s.charAt(i)==s.charAt(j)){
                    dp[i][j] = dp[i+1][j-1] + 2;
                } 
                else{
                    dp[i][j] = Math.max(dp[i+1][j], dp[i][j-1]);
                }
            }
        }
        return dp[0][n-1];
    }
}
```

## 4. æ‹“å±•å»¶ä¼¸

æ¯”å¦‚[1312. è®©å­—ç¬¦ä¸²æˆä¸ºå›æ–‡ä¸²çš„æœ€å°‘æ’å…¥æ¬¡æ•°](https://leetcode-cn.com/problems/minimum-insertion-steps-to-make-a-string-palindrome)ä¹Ÿå¯ä»¥æŒ‰åŒæ ·çš„æ€è·¯åšæ‰äº†ã€‚

![image-20220415025100502](img/image-20220415025100502.png)

æ€è·¯ï¼š

`dp`æ•°ç»„çš„å®šä¹‰æ˜¯: 

* **åœ¨å­ä¸²`arr[i..j]`ä¸­ä½¿å…¶æˆä¸ºå›æ–‡å­åºåˆ—é•¿åº¦è¿›è¡Œæ’å…¥æ“ä½œæ•°é‡æœ€å°‘ä¸º`dp[i][j]`**ã€‚

```java
class Solution {
    public int minInsertions(String s) {
        int n = s.length();
        if(n==1) return 0;

        int[][] dp = new int[n][n]; // dp æ•°ç»„çš„basecase å…¨æ˜¯0ï¼›

        for(int i=n-1; i>=0; --i){
            for(int j=i+1; j<n; ++j){
                if(s.charAt(i)==s.charAt(j)){
                    dp[i][j] = dp[i+1][j-1];
                }else{
                    dp[i][j] = Math.min(dp[i][j-1], dp[i+1][j]) + 1;
                }
            }
        }

        return dp[0][n-1];
    }
}
```

