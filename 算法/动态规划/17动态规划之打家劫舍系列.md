# åŠ¨æ€è§„åˆ’ï¼šæ‰“å®¶åŠ«èˆ

|                            ç‰›å®¢ç½‘                            |                           LeetCode                           |                             åŠ›æ‰£                             | éš¾åº¦ |
| :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :--: |
| [æ‰“å®¶åŠ«èˆ](https://www.nowcoder.com/practice/c5fbf7325fbd4c0ea3d0c3ea6bc6cc79?tpId=295&fromPut=pc_wzcpa_labuladong_sf) | [198. House Robber](https://leetcode.com/problems/house-robber/) | [198. æ‰“å®¶åŠ«èˆ](https://leetcode-cn.com/problems/house-robber/) |  ğŸŸ    |
| [æ‰“å®¶åŠ«èˆ II](https://www.nowcoder.com/practice/a5c127769dd74a63ada7bff37d9c5815?tpId=295&fromPut=pc_wzcpa_labuladong_sf) | [213. House Robber II](https://leetcode.com/problems/house-robber-ii/) | [213. æ‰“å®¶åŠ«èˆ II](https://leetcode-cn.com/problems/house-robber-ii/) |  ğŸŸ    |
| [æ‰“å®¶åŠ«èˆ III](https://www.nowcoder.com/practice/82b6dce6a7634419b272ee4397e26d89https://www.nowcoder.com/practice/3911a20b3f8743058214ceaa099eeb45?tpId=295&fromPut=pc_wzcpa_labuladong_sf) | [337. House Robber III](https://leetcode.com/problems/house-robber-iii/) | [337. æ‰“å®¶åŠ«èˆ III](https://leetcode-cn.com/problems/house-robber-iii/) |  ğŸŸ    |

æ‰“å®¶åŠ«èˆç³»åˆ—æ€»å…±æœ‰ä¸‰é“ï¼Œéš¾åº¦è®¾è®¡éå¸¸åˆç†ï¼Œå±‚å±‚é€’è¿›ã€‚ç¬¬ä¸€é“æ˜¯æ¯”è¾ƒæ ‡å‡†çš„åŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œè€Œç¬¬äºŒé“èå…¥äº†ç¯å½¢æ•°ç»„çš„æ¡ä»¶ï¼Œç¬¬ä¸‰é“æ›´ç»ï¼Œè®©ç›—è´¼åœ¨äºŒå‰æ ‘ä¸Šæ‰“åŠ«ã€‚

## 1. æ‰“å®¶åŠ«èˆ

![å›¾ç‰‡](img/640-0534820.jpeg)

**è§£å†³åŠ¨æ€è§„åˆ’é—®é¢˜å°±æ˜¯æ‰¾ã€ŒçŠ¶æ€ã€å’Œã€Œé€‰æ‹©ã€ï¼Œä»…æ­¤è€Œå·²**ã€‚

å‡æƒ³ä½ å°±æ˜¯è¿™ä¸ªä¸“ä¸šå¼ºç›—ï¼Œä»å·¦åˆ°å³èµ°è¿‡è¿™ä¸€æ’æˆ¿å­ï¼Œåœ¨æ¯é—´æˆ¿å­å‰éƒ½æœ‰ä¸¤ç§**é€‰æ‹©**ï¼šæŠ¢æˆ–è€…ä¸æŠ¢ã€‚

å¦‚æœä½ æŠ¢äº†è¿™é—´æˆ¿å­ï¼Œé‚£ä¹ˆä½ è‚¯å®šä¸èƒ½æŠ¢ç›¸é‚»çš„ä¸‹ä¸€é—´æˆ¿å­äº†ï¼Œåªèƒ½ä»**ä¸‹ä¸‹é—´**æˆ¿å­å¼€å§‹åšé€‰æ‹©ã€‚

å¦‚æœä½ ä¸æŠ¢è¿™é—´æˆ¿å­ï¼Œé‚£ä¹ˆä½ å¯ä»¥èµ°åˆ°**ä¸‹ä¸€é—´**æˆ¿å­å‰ï¼Œç»§ç»­åšé€‰æ‹©ã€‚

å½“ä½ èµ°è¿‡äº†æœ€åä¸€é—´æˆ¿å­åï¼Œä½ å°±æ²¡å¾—æŠ¢äº†ï¼Œèƒ½æŠ¢åˆ°çš„é’±æ˜¾ç„¶æ˜¯ 0ï¼ˆ**base case**ï¼‰ã€‚

ä»¥ä¸Šçš„é€»è¾‘å¾ˆç®€å•å§ï¼Œå…¶å®å·²ç»æ˜ç¡®äº†ã€ŒçŠ¶æ€ã€å’Œã€Œé€‰æ‹©ã€ï¼š**ä½ é¢å‰æˆ¿å­çš„ç´¢å¼•å°±æ˜¯çŠ¶æ€ï¼ŒæŠ¢å’Œä¸æŠ¢å°±æ˜¯é€‰æ‹©**ã€‚

åœ¨ä¸¤ä¸ªé€‰æ‹©ä¸­ï¼Œæ¯æ¬¡éƒ½é€‰æ›´å¤§çš„ç»“æœï¼Œæœ€åå¾—åˆ°çš„å°±æ˜¯æœ€å¤šèƒ½æŠ¢åˆ°çš„ moneyï¼š

```java
// ä¸»å‡½æ•°
public int rob(int[] nums) {
    return dp(nums, 0);
}
// è¿”å› nums[start..] èƒ½æŠ¢åˆ°çš„æœ€å¤§å€¼
private int dp(int[] nums, int start) {
    if (start >= nums.length) {
        return 0;
    }

    int res = Math.max(
            // ä¸æŠ¢ï¼Œå»ä¸‹å®¶
            dp(nums, start + 1), 
            // æŠ¢ï¼Œå»ä¸‹ä¸‹å®¶
            nums[start] + dp(nums, start + 2)
        );
    return res;
}
```

æ˜ç¡®äº†çŠ¶æ€è½¬ç§»ï¼Œå°±å¯ä»¥å‘ç°å¯¹äºåŒä¸€`start`ä½ç½®ï¼Œæ˜¯å­˜åœ¨é‡å å­é—®é¢˜çš„ï¼Œå¯ä»¥ç”¨å¤‡å¿˜å½•è¿›è¡Œä¼˜åŒ–ï¼š

```java
private int[] memo;
// ä¸»å‡½æ•°
public int rob(int[] nums) {
    // åˆå§‹åŒ–å¤‡å¿˜å½•
    memo = new int[nums.length];
    Arrays.fill(memo, -1);
    // å¼ºç›—ä»ç¬¬ 0 é—´æˆ¿å­å¼€å§‹æŠ¢åŠ«
    return dp(nums, 0);
}

// è¿”å› dp[start..] èƒ½æŠ¢åˆ°çš„æœ€å¤§å€¼
private int dp(int[] nums, int start) {
    if (start >= nums.length) {
        return 0;
    }
    // é¿å…é‡å¤è®¡ç®—
    if (memo[start] != -1) return memo[start];

    int res = Math.max(dp(nums, start + 1), 
                    nums[start] + dp(nums, start + 2));
    // è®°å…¥å¤‡å¿˜å½•
    memo[start] = res;
    return res;
}
```

**è‡ªåº•å‘ä¸Š**çš„è§£æ³•ï¼š

```java
class Solution {
    public int rob(int[] nums) {
        // çŠ¶æ€å‰iä¸ªæˆ¿é—´ï¼Œé€‰æ‹© å·æˆ–è€…ä¸å·
        int n = nums.length;
        if(n==1) return nums[0];
        int[] dp = new int[n+1];
        dp[1] = nums[0];
        for(int i=2; i<=n; ++i){
            dp[i] = Math.max(dp[i-1], dp[i-2]+nums[i-1]);
        }
        return dp[n];
    }
}
```

## 2. æ‰“å®¶åŠ«èˆ2

è¿™é“é¢˜ç›®å’Œç¬¬ä¸€é“æè¿°åŸºæœ¬ä¸€æ ·ï¼Œå¼ºç›—ä¾ç„¶ä¸èƒ½æŠ¢åŠ«ç›¸é‚»çš„æˆ¿å­ï¼Œè¾“å…¥ä¾ç„¶æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯å‘Šè¯‰ä½ **è¿™äº›æˆ¿å­ä¸æ˜¯ä¸€æ’ï¼Œè€Œæ˜¯å›´æˆäº†ä¸€ä¸ªåœˆ**ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œç°åœ¨ç¬¬ä¸€é—´æˆ¿å­å’Œæœ€åä¸€é—´æˆ¿å­ä¹Ÿç›¸å½“äºæ˜¯ç›¸é‚»çš„ï¼Œä¸èƒ½åŒæ—¶æŠ¢ã€‚æ¯”å¦‚è¯´è¾“å…¥æ•°ç»„`nums=[2,3,2]`ï¼Œç®—æ³•è¿”å›çš„ç»“æœåº”è¯¥æ˜¯ 3 è€Œä¸æ˜¯ 4ï¼Œå› ä¸ºå¼€å¤´å’Œç»“å°¾ä¸èƒ½åŒæ—¶è¢«æŠ¢ã€‚

é‚£ä¹ˆåœ¨è¿™ä¸ªé—®é¢˜ä¸Šæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ

é¦–å…ˆï¼Œé¦–å°¾æˆ¿é—´ä¸èƒ½åŒæ—¶è¢«æŠ¢ï¼Œé‚£ä¹ˆåªå¯èƒ½æœ‰ä¸‰ç§ä¸åŒæƒ…å†µï¼šè¦ä¹ˆéƒ½ä¸è¢«æŠ¢ï¼›è¦ä¹ˆç¬¬ä¸€é—´æˆ¿å­è¢«æŠ¢æœ€åä¸€é—´ä¸æŠ¢ï¼›è¦ä¹ˆæœ€åä¸€é—´æˆ¿å­è¢«æŠ¢ç¬¬ä¸€é—´ä¸æŠ¢ã€‚

![å›¾ç‰‡](img/640-20220421184544871.jpeg)

**åªè¦æ¯”è¾ƒæƒ…å†µäºŒå’Œæƒ…å†µä¸‰å°±è¡Œäº†ï¼Œ**å› ä¸ºè¿™ä¸¤ç§æƒ…å†µå¯¹äºæˆ¿å­çš„é€‰æ‹©ä½™åœ°æ¯”æƒ…å†µä¸€å¤§å‘€ï¼Œæˆ¿å­é‡Œçš„é’±æ•°éƒ½æ˜¯éè´Ÿæ•°ï¼Œæ‰€ä»¥é€‰æ‹©ä½™åœ°å¤§ï¼Œæœ€ä¼˜å†³ç­–ç»“æœè‚¯å®šä¸ä¼šå°ã€‚

æ‰€ä»¥åªéœ€å¯¹ä¹‹å‰çš„è§£æ³•ç¨ä½œä¿®æ”¹å³å¯ï¼š

```java
public int rob(int[] nums) {
    int n = nums.length;
    if (n == 1) return nums[0];
    return Math.max(robRange(nums, 0, n - 2), 
                    robRange(nums, 1, n - 1));
}

// ä»…è®¡ç®—é—­åŒºé—´ [start,end] çš„æœ€ä¼˜ç»“æœ
int robRange(int[] nums, int start, int end) {
    int n = nums.length;
    int dp_i_1 = 0, dp_i_2 = 0;
    int dp_i = 0;
    for (int i = end; i >= start; i--) {
        dp_i = Math.max(dp_i_1, nums[i] + dp_i_2);
        dp_i_2 = dp_i_1;
        dp_i_1 = dp_i;
    }
    return dp_i;
}
```

## 3. æ‰“å®¶åŠ«èˆ3

ç¬¬ä¸‰é¢˜åˆæƒ³æ³•è®¾æ³•åœ°å˜èŠ±æ ·äº†ï¼Œæ­¤å¼ºç›—å‘ç°ç°åœ¨é¢å¯¹çš„æˆ¿å­ä¸æ˜¯ä¸€æ’ï¼Œä¸æ˜¯ä¸€åœˆï¼Œè€Œæ˜¯ä¸€æ£µäºŒå‰æ ‘ï¼æˆ¿å­åœ¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸Šï¼Œç›¸è¿çš„ä¸¤ä¸ªæˆ¿å­ä¸èƒ½åŒæ—¶è¢«æŠ¢åŠ«ï¼š

æ•´ä½“çš„æ€è·¯å®Œå…¨æ²¡å˜ï¼Œè¿˜æ˜¯åšæŠ¢æˆ–è€…ä¸æŠ¢çš„é€‰æ‹©ï¼Œå–æ”¶ç›Šè¾ƒå¤§çš„é€‰æ‹©ã€‚ç”šè‡³æˆ‘ä»¬å¯ä»¥ç›´æ¥æŒ‰è¿™ä¸ªå¥—è·¯å†™å‡ºä»£ç ï¼š

```java
Map<TreeNode, Integer> memo = new HashMap<>();
public int rob(TreeNode root) {
    if (root == null) return 0;
    // åˆ©ç”¨å¤‡å¿˜å½•æ¶ˆé™¤é‡å å­é—®é¢˜
    if (memo.containsKey(root)) 
        return memo.get(root);
    // æŠ¢ï¼Œç„¶åå»ä¸‹ä¸‹å®¶
    int do_it = root.val
        + (root.left == null ? 
            0 : rob(root.left.left) + rob(root.left.right))
        + (root.right == null ? 
            0 : rob(root.right.left) + rob(root.right.right));
    // ä¸æŠ¢ï¼Œç„¶åå»ä¸‹å®¶
    int not_do = rob(root.left) + rob(root.right);

    int res = Math.max(do_it, not_do);
    memo.put(root, res);
    return res;
}
```

è¿™é“é¢˜å°±è§£å†³äº†ï¼Œæ—¶é—´å¤æ‚åº¦ O(N)ï¼Œ`N`ä¸ºæ•°çš„èŠ‚ç‚¹æ•°ã€‚

ä½†æ˜¯è¿™é“é¢˜è®©æˆ‘è§‰å¾—å·§å¦™çš„ç‚¹åœ¨äºï¼Œè¿˜æœ‰æ›´æ¼‚äº®çš„è§£æ³•ã€‚æ¯”å¦‚ä¸‹é¢æ˜¯æˆ‘åœ¨è¯„è®ºåŒºçœ‹åˆ°çš„ä¸€ä¸ªè§£æ³•ï¼š

```java
int rob(TreeNode root) {
    int[] res = dp(root);
    return Math.max(res[0], res[1]);
}

/* è¿”å›ä¸€ä¸ªå¤§å°ä¸º 2 çš„æ•°ç»„ arr
arr[0] è¡¨ç¤ºä¸æŠ¢ root çš„è¯ï¼Œå¾—åˆ°çš„æœ€å¤§é’±æ•°
arr[1] è¡¨ç¤ºæŠ¢ root çš„è¯ï¼Œå¾—åˆ°çš„æœ€å¤§é’±æ•° */
int[] dp(TreeNode root) {
    if (root == null)
        return new int[]{0, 0};
    int[] left = dp(root.left);
    int[] right = dp(root.right);
    // æŠ¢ï¼Œä¸‹å®¶å°±ä¸èƒ½æŠ¢äº†
    int rob = root.val + left[0] + right[0];
    // ä¸æŠ¢ï¼Œä¸‹å®¶å¯æŠ¢å¯ä¸æŠ¢ï¼Œå–å†³äºæ”¶ç›Šå¤§å°
    int not_rob = Math.max(left[0], left[1])
                + Math.max(right[0], right[1]);

    return new int[]{not_rob, rob};
}
```

æ—¶é—´å¤æ‚åº¦ O(N)ï¼Œç©ºé—´å¤æ‚åº¦åªæœ‰é€’å½’å‡½æ•°å †æ ˆæ‰€éœ€çš„ç©ºé—´ï¼Œä¸éœ€è¦å¤‡å¿˜å½•çš„é¢å¤–ç©ºé—´ã€‚

ä½ çœ‹ä»–å’Œæˆ‘ä»¬çš„æ€è·¯ä¸ä¸€æ ·ï¼Œä¿®æ”¹äº†é€’å½’å‡½æ•°çš„å®šä¹‰ï¼Œç•¥å¾®ä¿®æ”¹äº†æ€è·¯ï¼Œä½¿å¾—é€»è¾‘è‡ªæ´½ï¼Œä¾ç„¶å¾—åˆ°äº†æ­£ç¡®çš„ç­”æ¡ˆï¼Œè€Œä¸”ä»£ç æ›´æ¼‚äº®ã€‚è¿™å°±æ˜¯æˆ‘ä»¬å‰æ–‡ [åŠ¨æ€è§„åˆ’ï¼šä¸åŒçš„å®šä¹‰äº§ç”Ÿä¸åŒçš„è§£æ³•](http://mp.weixin.qq.com/s?__biz=MzAxODQxMDM0Mw==&mid=2247484469&idx=1&sn=e8d321c8ad62483874a997e9dd72da8f&chksm=9bd7fa3daca0732b316aa0afa58e70357e1cb7ab1fe0855d06bc4a852abb1b434c01c7dd19d6&scene=21#wechat_redirect) æ‰€è¯´è¿‡çš„åŠ¨æ€è§„åˆ’é—®é¢˜çš„ä¸€ä¸ªç‰¹æ€§ã€‚

å®é™…ä¸Šï¼Œè¿™ä¸ªè§£æ³•æ¯”æˆ‘ä»¬çš„è§£æ³•è¿è¡Œæ—¶é—´è¦å¿«å¾—å¤šï¼Œè™½ç„¶ç®—æ³•åˆ†æå±‚é¢æ—¶é—´å¤æ‚åº¦æ˜¯ç›¸åŒçš„ã€‚åŸå› åœ¨äºæ­¤è§£æ³•æ²¡æœ‰ä½¿ç”¨é¢å¤–çš„å¤‡å¿˜å½•ï¼Œå‡å°‘äº†æ•°æ®æ“ä½œçš„å¤æ‚æ€§ï¼Œæ‰€ä»¥å®é™…è¿è¡Œæ•ˆç‡ä¼šå¿«ã€‚