# 01 DFSï¼ˆBFSï¼‰ä¸€æ–‡ç§’æ€å²›å±¿

|                             åŠ›æ‰£                             | éš¾åº¦ |
| :----------------------------------------------------------: | :--: |
| [200. å²›å±¿æ•°é‡](https://leetcode-cn.com/problems/number-of-islands) |  ğŸŸ    |
| [1254. ç»Ÿè®¡å°é—­å²›å±¿çš„æ•°ç›®](https://leetcode-cn.com/problems/number-of-closed-islands) |  ğŸŸ    |
| [1020. é£åœ°çš„æ•°é‡](https://leetcode-cn.com/problems/number-of-enclaves) |  ğŸŸ    |
| [695. å²›å±¿çš„æœ€å¤§é¢ç§¯](https://leetcode-cn.com/problems/max-area-of-island) |  ğŸŸ    |
| [1905. ç»Ÿè®¡å­å²›å±¿](https://leetcode-cn.com/problems/count-sub-islands) |  ğŸŸ    |
| [694. ä¸åŒå²›å±¿çš„æ•°é‡](https://leetcode-cn.com/problems/number-of-distinct-islands)âœ¨ |  ğŸŸ    |

å²›å±¿ç³»åˆ—ç®—æ³•é—®é¢˜æ˜¯ç»å…¸çš„é¢è¯•é«˜é¢‘é¢˜ï¼Œè™½ç„¶åŸºæœ¬çš„é—®é¢˜å¹¶ä¸éš¾ï¼Œä½†æ˜¯è¿™ç±»é—®é¢˜æœ‰ä¸€äº›æœ‰æ„æ€çš„æ‰©å±•ï¼Œæ¯”å¦‚æ±‚å­å²›å±¿æ•°é‡ï¼Œæ±‚å½¢çŠ¶ä¸åŒçš„å²›å±¿æ•°é‡ç­‰ç­‰ï¼Œæœ¬æ–‡å°±æ¥æŠŠè¿™äº›é—®é¢˜ä¸€ç½‘æ‰“å°½ã€‚

**å²›å±¿ç³»åˆ—é¢˜ç›®çš„æ ¸å¿ƒè€ƒç‚¹å°±æ˜¯ç”¨ DFSï¼ˆä¸»è¦ï¼‰ç®—æ³•éå†äºŒç»´æ•°ç»„**ã€‚

é‚£ä¹ˆå¦‚ä½•åœ¨äºŒç»´çŸ©é˜µä¸­ä½¿ç”¨ DFS æœç´¢å‘¢ï¼Ÿå¦‚æœä½ æŠŠäºŒç»´çŸ©é˜µä¸­çš„æ¯ä¸€ä¸ªä½ç½®çœ‹åšä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿™ä¸ªèŠ‚ç‚¹çš„ä¸Šä¸‹å·¦å³å››ä¸ªä½ç½®å°±æ˜¯ç›¸é‚»èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæ•´ä¸ªçŸ©é˜µå°±å¯ä»¥æŠ½è±¡æˆä¸€å¹…ç½‘çŠ¶çš„ã€Œå›¾ã€ç»“æ„ã€‚

```java
// äºŒç»´çŸ©é˜µéå†æ¡†æ¶
void dfs(int[][] grid, int i, int j, boolean[][] visited) {
    int m = grid.length, n = grid[0].length;
    if (i < 0 || j < 0 || i >= m || j >= n) {
        // è¶…å‡ºç´¢å¼•è¾¹ç•Œ
        return;
    }
    if (visited[i][j]) {
        // å·²éå†è¿‡ (i, j)
        return;
    }
    // è¿›å…¥èŠ‚ç‚¹ (i, j)
    visited[i][j] = true;
    dfs(grid, i - 1, j, visited); // ä¸Š
    dfs(grid, i + 1, j, visited); // ä¸‹
    dfs(grid, i, j - 1, visited); // å·¦
    dfs(grid, i, j + 1, visited); // å³
}
```

> è¿™é‡Œé¢å¤–è¯´ä¸€ä¸ªå¤„ç†äºŒç»´æ•°ç»„çš„å¸¸ç”¨å°æŠ€å·§ï¼Œä½ æœ‰æ—¶ä¼šçœ‹åˆ°ä½¿ç”¨ã€Œæ–¹å‘æ•°ç»„ã€æ¥å¤„ç†ä¸Šä¸‹å·¦å³çš„éå†ï¼Œå’Œå‰æ–‡ [å›¾éå†æ¡†æ¶](https://labuladong.github.io/algo/2/20/48/) çš„ä»£ç å¾ˆç±»ä¼¼ï¼šå¯ä»¥æŒ‰ä¸ªäººå–œå¥½æ¥

```java
// æ–¹å‘æ•°ç»„ï¼Œåˆ†åˆ«ä»£è¡¨ä¸Šã€ä¸‹ã€å·¦ã€å³
int[][] dirs = new int[][]{{-1,0}, {1,0}, {0,-1}, {0,1}};

void dfs(int[][] grid, int i, int j, boolean[][] visited) {
    int m = grid.length, n = grid[0].length;
    if (i < 0 || j < 0 || i >= m || j >= n) {
        // è¶…å‡ºç´¢å¼•è¾¹ç•Œ
        return;
    }
    if (visited[i][j]) {
        // å·²éå†è¿‡ (i, j)
        return;
    }

    // è¿›å…¥èŠ‚ç‚¹ (i, j)
    visited[i][j] = true;
    // é€’å½’éå†ä¸Šä¸‹å·¦å³çš„èŠ‚ç‚¹
    for (int[] d : dirs) {
        int next_i = i + d[0];
        int next_j = j + d[1];
        dfs(grid, next_i, next_j, visited);
    }
    // ç¦»å¼€èŠ‚ç‚¹ (i, j)
}
```

## 1. å²›å±¿æ•°é‡

ç¬¬ 200 é¢˜ã€Œ [å²›å±¿æ•°é‡](https://leetcode-cn.com/problems/number-of-islands)ã€ï¼Œæœ€ç®€å•ä¹Ÿæ˜¯æœ€ç»å…¸çš„ä¸€é“é—®é¢˜ï¼Œé¢˜ç›®ä¼šè¾“å…¥ä¸€ä¸ªäºŒç»´æ•°ç»„ `grid`ï¼Œå…¶ä¸­åªåŒ…å« `0` æˆ–è€… `1`ï¼Œ`0` ä»£è¡¨æµ·æ°´ï¼Œ`1` ä»£è¡¨é™†åœ°ï¼Œä¸”å‡è®¾è¯¥çŸ©é˜µå››å‘¨éƒ½æ˜¯è¢«æµ·æ°´åŒ…å›´ç€çš„ã€‚

æˆ‘ä»¬è¯´è¿æˆç‰‡çš„é™†åœ°å½¢æˆå²›å±¿ï¼Œé‚£ä¹ˆè¯·ä½ å†™ä¸€ä¸ªç®—æ³•ï¼Œè®¡ç®—è¿™ä¸ªçŸ©é˜µ `grid` ä¸­å²›å±¿çš„ä¸ªã€‚

![img](img/1.jpg)

ä¾‹å¦‚ä¸Šå›¾ï¼Œè¯´é¢˜ç›®ç»™è¿™ä¸ª `grid` æœ‰å››ç‰‡å²›å±¿ï¼Œç®—æ³•åº”è¯¥è¿”å› 4ã€‚

> **æ¯æ¬¡é‡åˆ°å²›å±¿ï¼Œéƒ½è¦ç”¨ DFS ç®—æ³•æŠŠå²›å±¿ã€Œæ·¹äº†ã€ï¼Œé¿å…ç»´æŠ¤ `visited` æ•°ç»„**ã€‚
>
> å› ä¸º `dfs` å‡½æ•°éå†åˆ°å€¼ä¸º `0` çš„ä½ç½®ä¼šç›´æ¥è¿”å›ï¼Œæ‰€ä»¥åªè¦æŠŠç»è¿‡çš„ä½ç½®éƒ½è®¾ç½®ä¸º `0`ï¼Œå°±å¯ä»¥èµ·åˆ°ä¸èµ°å›å¤´è·¯çš„ä½œç”¨ã€‚
>
> PSï¼šè¿™ç±» DFS ç®—æ³•è¿˜æœ‰ä¸ªåˆ«åå«åš [FloodFill ç®—æ³•](https://mp.weixin.qq.com/s/Y7snQIraCC6PRhj9ZSnlzw)ï¼Œç°åœ¨æœ‰æ²¡æœ‰è§‰å¾— FloodFill è¿™ä¸ªåå­—è¿˜æŒºè´´åˆ‡çš„~

```java
// ä¸»å‡½æ•°ï¼Œè®¡ç®—å²›å±¿æ•°é‡
int numIslands(char[][] grid) {
    int res = 0;
    int m = grid.length, n = grid[0].length;
    // éå† grid
    for (int i = 0; i < m; i++) {
        for (int j = 0; j < n; j++) {
            if (grid[i][j] == '1') {
                // æ¯å‘ç°ä¸€ä¸ªå²›å±¿ï¼Œå²›å±¿æ•°é‡åŠ ä¸€
                res++;
                // ç„¶åä½¿ç”¨ DFS å°†å²›å±¿æ·¹äº†
                dfs(grid, i, j);
            }
        }
    }
    return res;
}

// ä» (i, j) å¼€å§‹ï¼Œå°†ä¸ä¹‹ç›¸é‚»çš„é™†åœ°éƒ½å˜æˆæµ·æ°´
void dfs(char[][] grid, int i, int j) {
    int m = grid.length, n = grid[0].length;
    if (i < 0 || j < 0 || i >= m || j >= n) {
        // è¶…å‡ºç´¢å¼•è¾¹ç•Œ
        return;
    }
    if (grid[i][j] == '0') {
        // å·²ç»æ˜¯æµ·æ°´äº†
        return;
    }
    // å°† (i, j) å˜æˆæµ·æ°´
    grid[i][j] = '0';
    // æ·¹æ²¡ä¸Šä¸‹å·¦å³çš„é™†åœ°
    dfs(grid, i + 1, j);
    dfs(grid, i, j + 1);
    dfs(grid, i - 1, j);
    dfs(grid, i, j - 1);
}
```

> åªè¦æå‰æŠŠé è¾¹çš„é™†åœ°éƒ½æ·¹æ‰ï¼Œç„¶åç®—å‡ºæ¥çš„å°±æ˜¯å°é—­å²›å±¿äº†ã€‚

åŠ›æ‰£ç¬¬ 1020 é¢˜ã€Œ [é£åœ°çš„æ•°é‡](https://leetcode-cn.com/problems/number-of-enclaves)ã€ï¼Œè¿™é¢˜ä¸è®©ä½ æ±‚å°é—­å²›å±¿çš„æ•°é‡ï¼Œè€Œæ˜¯æ±‚å°é—­å²›å±¿çš„é¢ç§¯æ€»å’Œã€‚

æ€è·¯éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå…ˆæŠŠé è¾¹çš„é™†åœ°æ·¹æ‰ï¼Œç„¶åå»æ•°å‰©ä¸‹çš„é™†åœ°æ•°é‡å°±è¡Œäº†.

## 2. å²›å±¿çš„æœ€å¤§é¢ç§¯

è¿™æ˜¯åŠ›æ‰£ç¬¬ 695 é¢˜ã€Œ [å²›å±¿çš„æœ€å¤§é¢ç§¯](https://leetcode-cn.com/problems/max-area-of-island)ã€ï¼Œ`0` è¡¨ç¤ºæµ·æ°´ï¼Œ`1` è¡¨ç¤ºé™†åœ°ï¼Œç°åœ¨ä¸è®©ä½ è®¡ç®—å²›å±¿çš„ä¸ªæ•°äº†ï¼Œè€Œæ˜¯è®©ä½ è®¡ç®—æœ€å¤§çš„é‚£ä¸ªå²›å±¿çš„é¢ç§¯ã€‚

```java
int maxAreaOfIsland(int[][] grid) {
    // è®°å½•å²›å±¿çš„æœ€å¤§é¢ç§¯
    int res = 0;
    int m = grid.length, n = grid[0].length;
    for (int i = 0; i < m; i++) {
        for (int j = 0; j < n; j++) {
            if (grid[i][j] == 1) {
                // æ·¹æ²¡å²›å±¿ï¼Œå¹¶æ›´æ–°æœ€å¤§å²›å±¿é¢ç§¯
                res = Math.max(res, dfs(grid, i, j));
            }
        }
    }
    return res;
}

// æ·¹æ²¡ä¸ (i, j) ç›¸é‚»çš„é™†åœ°ï¼Œå¹¶è¿”å›æ·¹æ²¡çš„é™†åœ°é¢ç§¯
int dfs(int[][] grid, int i, int j) {
    int m = grid.length, n = grid[0].length;
    if (i < 0 || j < 0 || i >= m || j >= n) {
        // è¶…å‡ºç´¢å¼•è¾¹ç•Œ
        return 0;
    }
    if (grid[i][j] == 0) {
        // å·²ç»æ˜¯æµ·æ°´äº†
        return 0;
    }
    // å°† (i, j) å˜æˆæµ·æ°´
    grid[i][j] = 0;

    return dfs(grid, i + 1, j)
         + dfs(grid, i, j + 1)
         + dfs(grid, i - 1, j)
         + dfs(grid, i, j - 1) + 1;
}
```

## 3. å­å²›å±¿æ•°é‡

åŠ›æ‰£ç¬¬ 1905 é¢˜ã€Œ [ç»Ÿè®¡å­å²›å±¿](https://leetcode-cn.com/problems/count-sub-islands)ã€

![img](img/4.jpg)

å½“å²›å±¿ `B` ä¸­æ‰€æœ‰é™†åœ°åœ¨å²›å±¿ `A` ä¸­ä¹Ÿæ˜¯é™†åœ°çš„æ—¶å€™ï¼Œå²›å±¿ `B` æ˜¯å²›å±¿ `A` çš„å­å²›ã€‚

**åè¿‡æ¥è¯´ï¼Œå¦‚æœå²›å±¿ `B` ä¸­å­˜åœ¨ä¸€ç‰‡é™†åœ°ï¼Œåœ¨å²›å±¿ `A` çš„å¯¹åº”ä½ç½®æ˜¯æµ·æ°´ï¼Œé‚£ä¹ˆå²›å±¿ `B` å°±ä¸æ˜¯å²›å±¿ `A` çš„å­å²›**ã€‚

é‚£ä¹ˆï¼Œæˆ‘ä»¬åªè¦éå† `grid2` ä¸­çš„æ‰€æœ‰å²›å±¿ï¼ŒæŠŠé‚£äº›ä¸å¯èƒ½æ˜¯å­å²›çš„å²›å±¿æ’é™¤æ‰ï¼Œå‰©ä¸‹çš„å°±æ˜¯å­å²›ã€‚

```java
int countSubIslands(int[][] grid1, int[][] grid2) {
    int m = grid1.length, n = grid1[0].length;
    for (int i = 0; i < m; i++) {
        for (int j = 0; j < n; j++) {
            if (grid1[i][j] == 0 && grid2[i][j] == 1) {
                // è¿™ä¸ªå²›å±¿è‚¯å®šä¸æ˜¯å­å²›ï¼Œæ·¹æ‰
                dfs(grid2, i, j);
            }
        }
    }
    // ç°åœ¨ grid2 ä¸­å‰©ä¸‹çš„å²›å±¿éƒ½æ˜¯å­å²›ï¼Œè®¡ç®—å²›å±¿æ•°é‡
    int res = 0;
    for (int i = 0; i < m; i++) {
        for (int j = 0; j < n; j++) {
            if (grid2[i][j] == 1) {
                res++;
                dfs(grid2, i, j);
            }
        }
    }
    return res;
}

// ä» (i, j) å¼€å§‹ï¼Œå°†ä¸ä¹‹ç›¸é‚»çš„é™†åœ°éƒ½å˜æˆæµ·æ°´
void dfs(int[][] grid, int i, int j) {
    int m = grid.length, n = grid[0].length;
    if (i < 0 || j < 0 || i >= m || j >= n) {
        return;
    }
    if (grid[i][j] == 0) {
        return;
    }

    grid[i][j] = 0;
    dfs(grid, i + 1, j);
    dfs(grid, i, j + 1);
    dfs(grid, i - 1, j);
    dfs(grid, i, j - 1);
}
```

> è¿™é“é¢˜çš„æ€è·¯å’Œè®¡ç®—ã€Œå°é—­å²›å±¿ã€æ•°é‡çš„æ€è·¯æœ‰äº›ç±»ä¼¼ï¼Œåªä¸è¿‡åè€…æ’é™¤é‚£äº›é è¾¹çš„å²›å±¿ï¼Œå‰è€…æ’é™¤é‚£äº›ä¸å¯èƒ½æ˜¯å­å²›çš„å²›å±¿ã€‚

## 4. ä¸åŒçš„å²›å±¿æ•°é‡

åŠ›æ‰£ç¬¬ 694 é¢˜ã€Œ [ä¸åŒçš„å²›å±¿æ•°é‡](https://leetcode-cn.com/problems/number-of-distinct-islands)ã€ï¼Œé¢˜ç›®è¿˜æ˜¯è¾“å…¥ä¸€ä¸ªäºŒç»´çŸ©é˜µï¼Œ`0` è¡¨ç¤ºæµ·æ°´ï¼Œ`1` è¡¨ç¤ºé™†åœ°ï¼Œè¿™æ¬¡è®©ä½ è®¡ç®— **ä¸åŒçš„ (distinct)** å²›å±¿æ•°é‡ã€‚

![img](img/5.jpg)

å…¶ä¸­æœ‰å››ä¸ªå²›å±¿ï¼Œä½†æ˜¯å·¦ä¸‹è§’å’Œå³ä¸Šè§’çš„å²›å±¿å½¢çŠ¶ç›¸åŒï¼Œæ‰€ä»¥ä¸åŒçš„å²›å±¿å…±æœ‰ä¸‰ä¸ªï¼Œç®—æ³•è¿”å› 3ã€‚

**æ€è·¯ï¼š**

å¾ˆæ˜¾ç„¶æˆ‘ä»¬å¾—æƒ³åŠæ³•æŠŠäºŒç»´çŸ©é˜µä¸­çš„ã€Œå²›å±¿ã€è¿›è¡Œè½¬åŒ–ï¼Œå˜æˆæ¯”å¦‚å­—ç¬¦ä¸²è¿™æ ·çš„ç±»å‹ï¼Œç„¶ååˆ©ç”¨ HashSet è¿™æ ·çš„æ•°æ®ç»“æ„å»é‡ï¼Œæœ€ç»ˆå¾—åˆ°ä¸åŒçš„å²›å±¿çš„ä¸ªæ•°ã€‚

å¦‚æœæƒ³æŠŠå²›å±¿è½¬åŒ–æˆå­—ç¬¦ä¸²ï¼Œè¯´ç™½äº†å°±æ˜¯åºåˆ—åŒ–ï¼Œåºåˆ—åŒ–è¯´ç™½äº†å°±æ˜¯éå†å˜›ï¼Œå‰æ–‡ [äºŒå‰æ ‘çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–](https://labuladong.github.io/algo/2/19/36/) è®²äº†äºŒå‰æ ‘å’Œå­—ç¬¦ä¸²äº’è½¬ï¼Œè¿™é‡Œä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚

**é¦–å…ˆï¼Œå¯¹äºå½¢çŠ¶ç›¸åŒçš„å²›å±¿ï¼Œå¦‚æœä»åŒä¸€èµ·ç‚¹å‡ºå‘ï¼Œ`dfs` å‡½æ•°éå†çš„é¡ºåºè‚¯å®šæ˜¯ä¸€æ ·çš„**ã€‚

éå†é¡ºåºä»æŸç§æ„ä¹‰ä¸Šè¯´å°±å¯ä»¥ç”¨æ¥æè¿°å²›å±¿çš„å½¢çŠ¶ï¼Œæ¯”å¦‚ä¸‹å›¾è¿™ä¸¤ä¸ªå²›å±¿ï¼š

![img](img/6.png)

å‡è®¾å®ƒä»¬çš„éå†é¡ºåºæ˜¯ï¼š

> ä¸‹ï¼Œå³ï¼Œä¸Šï¼Œæ’¤é”€ä¸Šï¼Œæ’¤é”€å³ï¼Œæ’¤é”€ä¸‹

å¦‚æœæˆ‘ç”¨åˆ†åˆ«ç”¨ `1, 2, 3, 4` ä»£è¡¨ä¸Šä¸‹å·¦å³ï¼Œç”¨ `-1, -2, -3, -4` ä»£è¡¨ä¸Šä¸‹å·¦å³çš„æ’¤é”€ï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·è¡¨ç¤ºå®ƒä»¬çš„éå†é¡ºåºï¼š

> 2, 4, 1, -1, -4, -2

**ä½ çœ‹ï¼Œè¿™å°±ç›¸å½“äºæ˜¯å²›å±¿åºåˆ—åŒ–çš„ç»“æœï¼Œåªè¦æ¯æ¬¡ä½¿ç”¨ `dfs` éå†å²›å±¿çš„æ—¶å€™ç”Ÿæˆè¿™ä¸²æ•°å­—è¿›è¡Œæ¯”è¾ƒï¼Œå°±å¯ä»¥è®¡ç®—åˆ°åº•æœ‰å¤šå°‘ä¸ªä¸åŒçš„å²›å±¿äº†**ã€‚

æˆ‘ä»¬éœ€è¦ç¨å¾®æ”¹é€  `dfs` å‡½æ•°ï¼Œæ·»åŠ ä¸€äº›å‡½æ•°å‚æ•°ä»¥ä¾¿è®°å½•éå†é¡ºåºï¼š

```java
void dfs(int[][] grid, int i, int j, StringBuilder sb, int dir) {
    int m = grid.length, n = grid[0].length;
    if (i < 0 || j < 0 || i >= m || j >= n 
        || grid[i][j] == 0) {
        return;
    }
    // å‰åºéå†ä½ç½®ï¼šè¿›å…¥ (i, j)
    grid[i][j] = 0;
    sb.append(dir).append(',');
    
    dfs(grid, i - 1, j, sb, 1); // ä¸Š
    dfs(grid, i + 1, j, sb, 2); // ä¸‹
    dfs(grid, i, j - 1, sb, 3); // å·¦
    dfs(grid, i, j + 1, sb, 4); // å³
    
    // ååºéå†ä½ç½®ï¼šç¦»å¼€ (i, j)
    sb.append(-dir).append(',');
}
```

`dir` è®°å½•æ–¹å‘ï¼Œ`dfs` å‡½æ•°é€’å½’ç»“æŸåï¼Œ`sb` è®°å½•ç€æ•´ä¸ªéå†é¡ºåºï¼Œå…¶å®è¿™å°±æ˜¯å‰æ–‡ [å›æº¯ç®—æ³•æ ¸å¿ƒå¥—è·¯](https://labuladong.github.io/algo/4/29/104/) è¯´åˆ°çš„å›æº¯ç®—æ³•æ¡†æ¶ï¼Œä½ çœ‹åˆ°å¤´æ¥è¿™äº›ç®—æ³•éƒ½æ˜¯ç›¸é€šçš„ã€‚

æœ‰äº†è¿™ä¸ª `dfs` å‡½æ•°å°±å¥½åŠäº†ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å†™å‡ºæœ€åçš„è§£æ³•ä»£ç ï¼š

```java
int numDistinctIslands(int[][] grid) {
    int m = grid.length, n = grid[0].length;
    // è®°å½•æ‰€æœ‰å²›å±¿çš„åºåˆ—åŒ–ç»“æœ
    HashSet<String> islands = new HashSet<>();
    for (int i = 0; i < m; i++) {
        for (int j = 0; j < n; j++) {
            if (grid[i][j] == 1) {
                // æ·¹æ‰è¿™ä¸ªå²›å±¿ï¼ŒåŒæ—¶å­˜å‚¨å²›å±¿çš„åºåˆ—åŒ–ç»“æœ
                StringBuilder sb = new StringBuilder();
                // åˆå§‹çš„æ–¹å‘å¯ä»¥éšä¾¿å†™ï¼Œä¸å½±å“æ­£ç¡®æ€§
                dfs(grid, i, j, sb, 666);
                islands.add(sb.toString());
            }
        }
    }
    // ä¸ç›¸åŒçš„å²›å±¿æ•°é‡
    return islands.size();
}
```

## 5. è¡¥å……çŸ¥è¯†ç‚¹

### 5.1 [HashSet]([Java HashSet | èœé¸Ÿæ•™ç¨‹ (runoob.com)](https://www.runoob.com/java/java-hashset.html))

* HashSet åŸºäº HashMap æ¥å®ç°çš„ï¼Œæ˜¯ä¸€ä¸ªä¸å…è®¸æœ‰é‡å¤å…ƒç´ çš„é›†åˆã€‚

* HashSet å…è®¸æœ‰ null å€¼ã€‚

* HashSet æ˜¯æ— åºçš„ï¼Œå³ä¸ä¼šè®°å½•æ’å…¥çš„é¡ºåºã€‚

* HashSet ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œ å¦‚æœå¤šä¸ªçº¿ç¨‹å°è¯•åŒæ—¶ä¿®æ”¹ HashSetï¼Œåˆ™æœ€ç»ˆç»“æœæ˜¯ä¸ç¡®å®šçš„ã€‚ æ‚¨å¿…é¡»åœ¨å¤šçº¿ç¨‹è®¿é—®æ—¶æ˜¾å¼åŒæ­¥å¯¹ HashSet çš„å¹¶å‘è®¿é—®ã€‚

* HashSet å®ç°äº† Set æ¥å£ã€‚

```java
// å¼•å…¥ HashSet ç±»      
import java.util.HashSet;

public class RunoobTest {
    public static void main(String[] args) {
        HashSet<String> sites = new HashSet<String>();
        sites.add("Google");
        sites.add("Runoob");
        sites.add("Taobao");
        sites.add("Zhihu");
        sites.add("Runoob");  // é‡å¤çš„å…ƒç´ ä¸ä¼šè¢«æ·»åŠ 
        System.out.println(sites);
      	
      	// åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨
        System.out.println(sites.contains("Taobao"));
        
        // åˆ é™¤å…ƒç´ ï¼Œåˆ é™¤æˆåŠŸè¿”å› trueï¼Œå¦åˆ™ä¸º false
      	sites.remove("Taobao");  
      	
      	// è®¡ç®—å¤§å°
      	System.out.println(sites.size());
      	
      	// è¿­ä»£ HashSet
      	for (String i : sites) {
            System.out.println(i);
        }
      	
      	// æ¸…ç©ºå…ƒç´ 
      	sites.clear();  
      
    }
}
```

æ‰§è¡Œä»¥ä¸Šä»£ç ï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š

```
[Google, Runoob, Zhihu, Taobao]
true
3
Google
Runoob
Zhihu
```

### 5.2 [Java StringBuffer å’Œ StringBuilder ç±»]([Java StringBuffer å’Œ StringBuilder ç±» | èœé¸Ÿæ•™ç¨‹ (runoob.com)](https://www.runoob.com/java/java-stringbuffer.html))

å½“å¯¹å­—ç¬¦ä¸²è¿›è¡Œä¿®æ”¹çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨ StringBuffer å’Œ StringBuilder ç±»ã€‚

å’Œ String ç±»ä¸åŒçš„æ˜¯ï¼ŒStringBuffer å’Œ StringBuilder ç±»çš„å¯¹è±¡èƒ½å¤Ÿè¢«å¤šæ¬¡çš„ä¿®æ”¹ï¼Œå¹¶ä¸”ä¸äº§ç”Ÿæ–°çš„æœªä½¿ç”¨å¯¹è±¡ã€‚

åœ¨ä½¿ç”¨ StringBuffer ç±»æ—¶ï¼Œæ¯æ¬¡éƒ½ä¼šå¯¹ StringBuffer å¯¹è±¡æœ¬èº«è¿›è¡Œæ“ä½œï¼Œè€Œä¸æ˜¯ç”Ÿæˆæ–°çš„å¯¹è±¡ï¼Œæ‰€ä»¥å¦‚æœéœ€è¦å¯¹å­—ç¬¦ä¸²è¿›è¡Œä¿®æ”¹æ¨èä½¿ç”¨ StringBufferã€‚

StringBuilder ç±»åœ¨ Java 5 ä¸­è¢«æå‡ºï¼Œå®ƒå’Œ StringBuffer ä¹‹é—´çš„æœ€å¤§ä¸åŒåœ¨äº StringBuilder çš„æ–¹æ³•ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ˆä¸èƒ½åŒæ­¥è®¿é—®ï¼‰ã€‚

ç”±äº StringBuilder ç›¸è¾ƒäº StringBuffer æœ‰é€Ÿåº¦ä¼˜åŠ¿ï¼Œæ‰€ä»¥å¤šæ•°æƒ…å†µä¸‹å»ºè®®ä½¿ç”¨ StringBuilder ç±»ã€‚

![img](img/2021-03-01-java-stringbuffer.svg)

> ç„¶è€Œåœ¨åº”ç”¨ç¨‹åºè¦æ±‚çº¿ç¨‹å®‰å…¨çš„æƒ…å†µä¸‹ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ StringBuffer ç±»ã€‚

**StringBuffer æ–¹æ³•**

ä»¥ä¸‹æ˜¯ StringBuffer ç±»æ”¯æŒçš„ä¸»è¦æ–¹æ³•ï¼š

| åºå· | æ–¹æ³•æè¿°                                                     |
| :--- | :----------------------------------------------------------- |
| 1    | public StringBuffer append(String s) å°†æŒ‡å®šçš„å­—ç¬¦ä¸²è¿½åŠ åˆ°æ­¤å­—ç¬¦åºåˆ—ã€‚ |
| 2    | public StringBuffer reverse()  å°†æ­¤å­—ç¬¦åºåˆ—ç”¨å…¶åè½¬å½¢å¼å–ä»£ã€‚ |
| 3    | public delete(int start, int end) ç§»é™¤æ­¤åºåˆ—çš„å­å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ã€‚ |
| 4    | public insert(int offset, int i) å°† `int` å‚æ•°çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼æ’å…¥æ­¤åºåˆ—ä¸­ã€‚ |
| 5    | insert(int offset, String str) å°† `str` å‚æ•°çš„å­—ç¬¦ä¸²æ’å…¥æ­¤åºåˆ—ä¸­ã€‚ |
| 6    | replace(int start, int end, String str) ä½¿ç”¨ç»™å®š `String` ä¸­çš„å­—ç¬¦æ›¿æ¢æ­¤åºåˆ—çš„å­å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ã€‚ |

ä»¥ä¸‹åˆ—è¡¨åˆ—å‡ºäº† StringBuffer ç±»çš„å…¶ä»–å¸¸ç”¨æ–¹æ³•ï¼š

| åºå· | æ–¹æ³•æè¿°                                                     |
| :--- | :----------------------------------------------------------- |
| 1    | int capacity() è¿”å›å½“å‰å®¹é‡ã€‚                                |
| 2    | char charAt(int index) è¿”å›æ­¤åºåˆ—ä¸­æŒ‡å®šç´¢å¼•å¤„çš„ `char` å€¼ã€‚  |
| 3    | void ensureCapacity(int minimumCapacity) ç¡®ä¿å®¹é‡è‡³å°‘ç­‰äºæŒ‡å®šçš„æœ€å°å€¼ã€‚ |
| 4    | void getChars(int srcBegin, int srcEnd, char[] dst, int dstBegin) å°†å­—ç¬¦ä»æ­¤åºåˆ—å¤åˆ¶åˆ°ç›®æ ‡å­—ç¬¦æ•°ç»„ `dst`ã€‚ |
| 5    | int indexOf(String str) è¿”å›ç¬¬ä¸€æ¬¡å‡ºç°çš„æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨è¯¥å­—ç¬¦ä¸²ä¸­çš„ç´¢å¼•ã€‚ |
| 6    | int indexOf(String str, int fromIndex) ä»æŒ‡å®šçš„ç´¢å¼•å¤„å¼€å§‹ï¼Œè¿”å›ç¬¬ä¸€æ¬¡å‡ºç°çš„æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨è¯¥å­—ç¬¦ä¸²ä¸­çš„ç´¢å¼•ã€‚ |
| 7    | int lastIndexOf(String str) è¿”å›æœ€å³è¾¹å‡ºç°çš„æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­çš„ç´¢å¼•ã€‚ |
| 8    | int lastIndexOf(String str, int fromIndex) è¿”å› String å¯¹è±¡ä¸­å­å­—ç¬¦ä¸²æœ€åå‡ºç°çš„ä½ç½®ã€‚ |
| 9    | int length()  è¿”å›é•¿åº¦ï¼ˆå­—ç¬¦æ•°ï¼‰ã€‚                           |
| 10   | void setCharAt(int index, char ch) å°†ç»™å®šç´¢å¼•å¤„çš„å­—ç¬¦è®¾ç½®ä¸º `ch`ã€‚ |
| 11   | void setLength(int newLength) è®¾ç½®å­—ç¬¦åºåˆ—çš„é•¿åº¦ã€‚           |
| 12   | CharSequence subSequence(int start, int end) è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦åºåˆ—ï¼Œè¯¥å­—ç¬¦åºåˆ—æ˜¯æ­¤åºåˆ—çš„å­åºåˆ—ã€‚ |
| 13   | String substring(int start) è¿”å›ä¸€ä¸ªæ–°çš„ `String`ï¼Œå®ƒåŒ…å«æ­¤å­—ç¬¦åºåˆ—å½“å‰æ‰€åŒ…å«çš„å­—ç¬¦å­åºåˆ—ã€‚ |
| 14   | String substring(int start, int end) è¿”å›ä¸€ä¸ªæ–°çš„ `String`ï¼Œå®ƒåŒ…å«æ­¤åºåˆ—å½“å‰æ‰€åŒ…å«çš„å­—ç¬¦å­åºåˆ—ã€‚ |
| 15   | String toString() è¿”å›æ­¤åºåˆ—ä¸­æ•°æ®çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚         |

æ›´å¤šè¯¦ç»†å†…å®¹

- StringBuffer ç±»ï¼šhttps://www.runoob.com/manual/jdk11api/java.base/java/lang/StringBuffer.html
- StringBuilder ç±»ï¼šhttps://www.runoob.com/manual/jdk11api/java.base/java/lang/StringBuilder.html
